const d=[{id:1,name:"Melissa Thong Kitten Heel",sku:"38068",price:199.9,description:"A Melissa Thong Kitten Heel une a tendência do salto baixo com o conforto do Melflex. Sofisticada e moderna, é perfeita para compor looks elegantes e casuais.",images:["assets/kitten-heel.png","https://images.unsplash.com/photo-1543163521-1bf539c55dd2?w=800&h=800&fit=crop"],colors:[{name:"Rosa",hex:"#E91E63"},{name:"Preto",hex:"#000000"},{name:"Branco",hex:"#FFFFFF"}],sizes:["33/34","35","36","37","38","39/40","41","42","43/44"],unavailableSizes:[]},{id:2,name:"Melissa Sun Barra Platform II",sku:"38066",price:219.9,description:"Com design versátil, a Melissa Sun Barra Platform II traz o brilho do glitter para iluminar seus passos. Conforto e estilo em uma plataforma única.",images:["assets/sun-barra.png","https://images.unsplash.com/photo-1560343090-f0409e92791a?w=800&h=800&fit=crop"],colors:[{name:"Prata",hex:"#C0C0C0"},{name:"Preto",hex:"#000000"},{name:"Bronze",hex:"#CD7F32"}],sizes:["33/34","35","36","37","38","39/40","41","42","43/44"],unavailableSizes:["41/42"]},{id:3,name:"Melissa Cross M-Lover Platform",sku:"37368",price:279.9,description:"Plataforma com tiras cruzadas que garante firmeza e estilo. A Melissa Cross M-Lover é a escolha certa para quem ama altura e conforto.",images:["assets/cross-mlover.png","https://images.unsplash.com/photo-1562183241-b937e95585b6?w=800&h=800&fit=crop"],colors:[{name:"Rosa",hex:"#FFB6C1"},{name:"Preto",hex:"#000000"},{name:"Verde",hex:"#006400"},{name:"Bege",hex:"#F5F5DC"}],sizes:["33/34","35","36","37","38","39/40","41","42","43/44"],unavailableSizes:[]},{id:4,name:"Melissa Stripes Platform M-Lover",sku:"37931",price:249.9,description:"Estilo e autenticidade na Melissa Stripes Platform. Tiras modernas e solado robusto para um visual impactante.",images:["assets/stripes-platform.png","https://images.unsplash.com/photo-1603487742131-4160ec999306?w=800&h=800&fit=crop"],colors:[{name:"Rosa",hex:"#FFC0CB"},{name:"Azul",hex:"#87CEEB"},{name:"Preto",hex:"#000000"}],sizes:["33/34","35","36","37","38","39/40","41","42","43/44"],unavailableSizes:[]},{id:5,name:"Melissa Eden",sku:"37943",price:169.9,description:"A Melissa Eden é a slides perfeita para o dia a dia, combinando praticidade com o design inconfundível da marca (Bolsa + Chinelo).",images:["assets/eden.png","https://images.unsplash.com/photo-1595950653106-6c9ebd614d3a?w=800&h=800&fit=crop"],colors:[{name:"Preto",hex:"#000000"},{name:"Rosa",hex:"#FFB6C1"},{name:"Branco",hex:"#FFFFFF"}],sizes:["33/34","35","36","37","38","39/40","41","42","43/44"],unavailableSizes:["33/34","41/42"]},{id:6,name:"Melissa M-Lover Thong Platform",sku:"37914",price:249.9,description:"Thong platform com a assinatura M-Lover. Conforto elevado e design clean para todas as ocasiões.",images:["assets/mlover-thong.png","https://images.unsplash.com/photo-1549298916-b41d501d3772?w=800&h=800&fit=crop"],colors:[{name:"Bege",hex:"#F5F5DC"},{name:"Preto",hex:"#000000"},{name:"Marrom",hex:"#8B4513"}],sizes:["33/34","35","36","37","38","39/40","41","42","43/44"],unavailableSizes:["38"]},{id:7,name:"Melissa Cozy M-Lover Platform",sku:"35977",price:279.9,description:"A Melissa Cozy M-Lover Platform é a plataforma feminina para quem ama a sensação de caminhar nas nuvens. Com palmilha em EVA texturizada, proporciona conforto prolongado.",images:["assets/cozy-mlover.png","https://images.unsplash.com/photo-1543163521-1bf539c55dd2?w=800&h=800&fit=crop"],colors:[{name:"Marrom",hex:"#8B4513"},{name:"Preto",hex:"#000000"},{name:"Bege",hex:"#F5F5DC"},{name:"Rosa",hex:"#FFC0CB"}],sizes:["33/34","35","36","37","38","39/40","41","42","43/44"],unavailableSizes:[]},{id:8,name:"Melissa Free Muse Platform",sku:"37835",price:349.9,description:"Superleve e cheia de estilo, a Melissa Free Muse Platform traz o conforto da família Free com uma plataforma robusta e detalhe de fivela.",images:["assets/free-muse.png","https://images.unsplash.com/photo-1595950653106-6c9ebd614d3a?w=800&h=800&fit=crop"],colors:[{name:"Marrom",hex:"#8B4513"},{name:"Preto",hex:"#000000"},{name:"Bege",hex:"#F5F5DC"}],sizes:["33/34","35","36","37","38","39/40","41","42","43/44"],unavailableSizes:[]},{id:9,name:"Melissa Free Cross",sku:"37857",price:279.9,description:"A Melissa Free Cross é a plataforma slide perfeita para quem busca conforto e leveza em um visual moderno. Com design minimalista e superleve.",images:["assets/free-cross.png","https://images.unsplash.com/photo-1595950653106-6c9ebd614d3a?w=800&h=800&fit=crop"],colors:[{name:"Verde",hex:"#556B2F"},{name:"Preto",hex:"#000000"},{name:"Branco",hex:"#FFFFFF"},{name:"Laranja",hex:"#FF4500"}],sizes:["33/34","35","36","37","38","39/40","41","42","43/44"],unavailableSizes:[]}];function q(){const e=new URLSearchParams(window.location.search),t=parseInt(e.get("id"))||1;return d.find(o=>o.id===t)||d[0]}let r=null,v=null;function k(){r=q(),document.getElementById("productTitle").textContent=r.name,document.getElementById("breadcrumbProduct").textContent=r.name,document.getElementById("productSku").textContent=`SKU: ${r.sku}`,document.getElementById("productPrice").textContent=p(r.price),document.getElementById("productInstallments").textContent=`ou 3x de ${p(r.price/3)}`,document.getElementById("pixPrice").textContent=p(r.price*.95),document.getElementById("productDescription").textContent=r.description;const e=document.querySelector(".quantity-selector");if(e&&!document.getElementById("qty-warning")){const a=document.createElement("p");a.id="qty-warning",a.style.color="red",a.style.fontSize="12px",a.style.marginTop="5px",a.style.display="none",a.textContent="Apenas 2 unidades por cadastro",e.parentNode.appendChild(a)}document.getElementById("mainImage").src=r.images[0],document.getElementById("mainImage").alt=r.name;const t=document.getElementById("galleryThumbs");t.innerHTML="",r.images.forEach((a,s)=>{const i=document.createElement("div");i.className=`gallery-thumb ${s===0?"active":""}`,i.innerHTML=`<img src="${a}" alt="${r.name}">`,i.onclick=()=>{document.getElementById("mainImage").src=a,document.querySelectorAll(".gallery-thumb").forEach(y=>y.classList.remove("active")),i.classList.add("active")},t.appendChild(i)});const o=document.getElementById("colorOptions");o.innerHTML="",r.colors.forEach((a,s)=>{const i=document.createElement("button");i.className=`color-option ${s===0?"selected":""}`,i.style.background=a.hex,a.hex==="#FFFFFF"&&(i.style.border="1px solid #ddd"),i.onclick=()=>S(a,i),o.appendChild(i)}),v=r.colors[0],document.getElementById("selectedColor").textContent=v.name;const n=document.getElementById("sizeOptions");n.innerHTML="",r.sizes.forEach(a=>{const s=document.createElement("button");s.className="size-option",s.textContent=a,r.unavailableSizes.includes(a)?s.classList.add("unavailable"):s.onclick=()=>b(a,s),n.appendChild(s)}),document.title=`${r.name} | Melissa Loja Oficial`}function S(e,t){v=e,document.getElementById("selectedColor").textContent=e.name,document.querySelectorAll(".color-option").forEach(o=>o.classList.remove("selected")),t.classList.add("selected")}function b(e,t){document.querySelectorAll(".size-option").forEach(o=>o.classList.remove("selected")),t.classList.add("selected")}function $(e){const t=document.getElementById("quantity"),o=document.getElementById("qty-warning");let n=parseInt(t.value)+e;n<1&&(n=1),n>2?(n=2,o&&(o.style.display="block")):(o&&(o.style.display="none"),n<=2&&o&&(o.style.display="none")),t.value=n}function p(e){return`R$ ${e.toFixed(2).replace(".",",")}`}function A(e){e.classList.toggle("open"),e.nextElementSibling.classList.toggle("show")}function T(){const e=document.getElementById("cepInput").value.replace(/\D/g,""),t=document.getElementById("shippingResult");if(e.length!==8){t.innerHTML='<span style="color: red;">CEP inválido</span>';return}t.innerHTML=`
        <p><strong>PAC:</strong> R$ 15,90 - 5 a 10 dias úteis</p>
        <p><strong>SEDEX:</strong> R$ 29,90 - 2 a 4 dias úteis</p>
        <p class="free"><strong>FRETE GRÁTIS</strong> para compras acima de R$299</p>
    `}document.getElementById("productTitle")&&k();let u=4,m=d;function H(){u=4,m=d,f();const e=document.querySelector(".load-more-btn");if(e){const t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),t.addEventListener("click",()=>{u+=4,f()})}}function R(){m=d.slice(0,4),z(m);const e=document.querySelector(".load-more-btn");e&&(e.style.display="none",e.parentElement.style.display="none")}function f(){const e=m.slice(0,u);z(e),N()}function N(){const e=document.querySelector(".load-more-btn");e&&(u>=m.length?(e.style.display="none",e.parentElement.style.display="none"):(e.style.display="inline-block",e.parentElement.style.display="block"))}function z(e){const t=document.getElementById("productsGrid");if(t){if(t.innerHTML="",e.length===0){t.innerHTML='<p style="grid-column: 1/-1; text-align: center; padding: 40px;">Nenhum produto encontrado com os filtros selecionados.</p>';return}e.forEach(o=>{const n=document.createElement("article");n.className="product-card",n.innerHTML=`
            <a href="product.html?id=${o.id}" class="product-link">
                <div class="product-image">
                    <img src="${o.images[0]}" alt="${o.name}">
                    <button class="favorite-btn" aria-label="Favoritar" onclick="event.preventDefault();">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                        </svg>
                    </button>
                </div>
                <div class="product-info">
                    <h3 class="product-name">${o.name}</h3>
                    <div class="product-colors">
                        ${o.colors.map(a=>`<span class="color-dot" style="background: ${a.hex}; ${a.hex==="#FFFFFF"?"border: 1px solid #ddd":""}"></span>`).join("")}
                    </div>
                    <p class="product-price">${p(o.price)}</p>
                    <p class="product-installments">ou 3x de ${p(o.price/3)}</p>
                </div>
            </a>
        `,t.appendChild(n)})}}let c={price:[],size:[],color:[]};const E=document.querySelector(".filter-btn"),h=document.querySelector(".filter-overlay"),B=document.querySelector(".filter-sidebar"),F=document.querySelector(".close-filter");function D(){h.classList.add("active"),B.classList.add("active"),document.body.style.overflow="hidden"}function g(){h.classList.remove("active"),B.classList.remove("active"),document.body.style.overflow=""}E&&E.addEventListener("click",D);F&&F.addEventListener("click",g);h&&h.addEventListener("click",g);const O=document.querySelectorAll(".size-filter-item");O.forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("active"),C()})});const U=document.querySelectorAll(".color-filter-item");U.forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("active"),C()})});const j=document.querySelectorAll('input[name="price"]');j.forEach(e=>{e.addEventListener("change",C)});function C(){c.size=Array.from(document.querySelectorAll(".size-filter-item.active")).map(e=>e.dataset.value),c.color=Array.from(document.querySelectorAll(".color-filter-item.active")).map(e=>e.dataset.value),c.price=Array.from(document.querySelectorAll('input[name="price"]:checked')).map(e=>e.value)}function G(){m=d.filter(t=>{const o=c.size.length===0||t.sizes.some(s=>c.size.includes(s)),n=c.color.length===0||t.colors.some(s=>c.color.includes(s.name)),a=c.price.length===0||c.price.some(s=>{const[i,y]=s.split("-").map(Number);return t.price>=i&&t.price<=y});return o&&n&&a}),u=4,f(),g()}function K(){document.querySelectorAll(".size-filter-item").forEach(e=>e.classList.remove("active")),document.querySelectorAll(".color-filter-item").forEach(e=>e.classList.remove("active")),document.querySelectorAll('input[name="price"]').forEach(e=>e.checked=!1),c={price:[],size:[],color:[]},m=d,u=4,f(),g()}window.initHome=H;window.initNovidades=R;window.clearFilters=K;window.applyFilters=G;window.selectColor=S;window.selectSize=b;window.changeQty=$;window.toggleAccordion=A;window.calculateShipping=T;window.products=d;let l=JSON.parse(localStorage.getItem("melissaCart"))||[];function w(){localStorage.setItem("melissaCart",JSON.stringify(l)),I(),M()}function I(){const e=l.reduce((o,n)=>o+n.quantity,0);document.querySelectorAll("#cartCount, .cart-count").forEach(o=>{o&&(o.textContent=e)})}function L(){if(!selectedSize){alert("Por favor, selecione um tamanho");return}const e=parseInt(document.getElementById("quantity").value),t=l.findIndex(o=>o.productId===currentProduct.id&&o.color===selectedColor.name&&o.size===selectedSize);t>-1?l[t].quantity+=e:l.push({productId:currentProduct.id,name:currentProduct.name,price:currentProduct.price,image:currentProduct.images[0],color:selectedColor.name,colorHex:selectedColor.hex,size:selectedSize,quantity:e}),w(),P()}function Q(e){l.splice(e,1),w()}function M(){const e=document.getElementById("cartItems"),t=document.getElementById("cartTotal");if(!e)return;if(l.length===0){e.innerHTML='<p class="cart-empty">Sua sacola está vazia</p>',t&&(t.textContent="R$ 0,00");return}let o="",n=0;l.forEach((a,s)=>{n+=a.price*a.quantity,o+=`
            <div class="cart-item">
                <div class="cart-item-image">
                    <img src="${a.image}" alt="${a.name}">
                </div>
                <div class="cart-item-info">
                    <p class="cart-item-name">${a.name}</p>
                    <p class="cart-item-details">Cor: ${a.color} | Tam: ${a.size} | Qtd: ${a.quantity}</p>
                    <p class="cart-item-price">${x(a.price*a.quantity)}</p>
                    <button class="cart-item-remove" onclick="removeFromCart(${s})">Remover</button>
                </div>
            </div>
        `}),e.innerHTML=o,t&&(t.textContent=x(n))}function P(){document.getElementById("cartOverlay").classList.add("open"),document.getElementById("cartSidebar").classList.add("open"),M()}function V(){document.getElementById("cartOverlay").classList.remove("open"),document.getElementById("cartSidebar").classList.remove("open")}function J(){if(!selectedSize){alert("Por favor, selecione um tamanho");return}L(),X()}function X(){if(l.length===0){alert("Sua sacola está vazia");return}alert(`Redirecionando para o checkout...

Em um site real, você seria direcionado para a página de pagamento.`)}function x(e){return`R$ ${e.toFixed(2).replace(".",",")}`}document.addEventListener("DOMContentLoaded",function(){I()});window.addToCart=L;window.removeFromCart=Q;window.openCart=P;window.closeCart=V;window.buyNow=J;
